[{"_path":"/blog/2024/apple_health_parser","_dir":"2024","_draft":false,"_partial":false,"_locale":"","title":"Apple Health Parser","description":"Publishing a Python package to extract, process, and analyse Apple HealthKit data","date":"2024-07-02","readtime":"11","tags":{"language":["python"],"field":["open source","data science","data visualisation"],"type":["package","tool"]},"repo":"https://github.com/alxdrcirilo/apple-health-parser","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üì¶ "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"PyPI"}]},{"type":"text","value":": "},{"type":"element","tag":"a","props":{"href":"https://pypi.org/project/apple-health-parser","rel":["nofollow"]},"children":[{"type":"text","value":"https://pypi.org/project/apple-health-parser/"}]},{"type":"text","value":" "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nüìù "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Documentation"}]},{"type":"text","value":": "},{"type":"element","tag":"a","props":{"href":"https://alxdrcirilo.dev/apple-health-parser","rel":["nofollow"]},"children":[{"type":"text","value":"https://alxdrcirilo.dev/apple-health-parser"}]}]},{"type":"element","tag":"h2","props":{"id":"preface"},"children":[{"type":"text","value":"Preface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"I've been a happy owner of an Apple Watch for about 4 years now. I must say that I was apprehensive about acquiring one at first, but I've quickly grown to love it. I initially bought one shortly after the COVID-19 pandemic started with the intent of motivating myself to remain active. Little did I know how useful and practical it would be to own one in everyday life, in my experience. Beyond the usual health tracking features associated with smartwatches, some of the use cases of the Apple Watch that I often make use of extend to setting reminders on the fly, recording workouts, checking the weather with one quick glance, and controlling my smart home devices directy from my wrist."}]},{"type":"element","tag":"h3","props":{"id":"sneak-peek"},"children":[{"type":"text","value":"Sneak peek"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here are some of the plots that "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":" can generate:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"header","src":"/images/2024/5.apple_health_parser/apple_health_parser.png"},"children":[]}]},{"type":"element","tag":"p","props":{"className":["figure-caption"]},"children":[{"type":"text","value":"Some plots generated with "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"motivation"},"children":[{"type":"text","value":"Motivation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You may ask:"}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\"But, why would you build a Python package when you can already visualise most metrics straight from your iPhone?\""}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Well, I'm a big data science nerd ü§ì I love finding new ways to visualise data. Every collection of (semi-)structured data has a story, and the fun part of data visualisation is finding a way to tell that story in a clear but memorable way."}]},{"type":"element","tag":"h2","props":{"id":"building-the-apple-health-parser"},"children":[{"type":"text","value":"Building the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]}]},{"type":"element","tag":"h3","props":{"id":"purpose"},"children":[{"type":"text","value":"Purpose"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In a nutshell, "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":" aims to be able to perform:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Extraction and processing of health records from "},{"type":"element","tag":"a","props":{"href":"https://developer.apple.com/documentation/healthkit","rel":["nofollow"]},"children":[{"type":"text","value":"Apple HealthKit"}]},{"type":"text","value":" data"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-1","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-1"},"children":[{"type":"text","value":"1"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Parsing and validation of health records"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Plotting (optionally interactive) health records"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Exporting plots and tables from the parsed health records in CSV"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-2","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-2"},"children":[{"type":"text","value":"2"}]}]},{"type":"text","value":" format"}]}]},{"type":"element","tag":"h3","props":{"id":"implementation"},"children":[{"type":"text","value":"Implementation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At the moment of writing of this blog post, the latest version is "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"apple-health-parser==0.5.0"}]},{"type":"text","value":". The design choices I will discuss herein reflect versions "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<=0.5.0"}]},{"type":"text","value":", with no guarantee that they will remain in effect in future versions of the package."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are four main classes (only two are directly used by users - marked by "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":") in "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Loader"}]},{"type":"text","value":" (in "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/blob/main/apple_health_parser/utils/loader.py","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"loader.py"}]}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Parser"}]},{"type":"text","value":"* (in "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/blob/main/apple_health_parser/utils/parser.py","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"parser.py"}]}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Preprocessor"}]},{"type":"text","value":" (in "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/blob/main/apple_health_parser/utils/preprocessor.py","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"preprocessor.py"}]}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Plot"}]},{"type":"text","value":"* (in "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/blob/main/apple_health_parser/plot/plots.py","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"plots.py"}]}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In addition to these main classes, a project-wide logger is defined in "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/blob/main/apple_health_parser/utils/logging.py","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"logging.py"}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"h4","props":{"id":"loader"},"children":[{"type":"text","value":"Loader"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Loader"}]},{"type":"text","value":" class encapsulates all the logic needed to extract the XML data from the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"export.zip"}]},{"type":"text","value":" generated by the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Health"}]},{"type":"text","value":" app on the iPhone."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Additionally, it also gets the records (i.e. health metrics) and logs some metadata (e.g. export date, birthday, etc.). All four methods in this class are actually static methods (i.e. they are decorated with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@staticmethod"}]},{"type":"text","value":"). Although the functions could indeed have been defined in the global scope (i.e. without being defined within a class), I preferred having them within the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Loader"}]},{"type":"text","value":" class in order to logically group them under a single namespace. These methods are essentially utility functions that don't share state but are related (i.e. they are used in loading the data). In my opinion, this keeps the code more cohesive and it also avoid polluting the global scope."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a small example, here's the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"read_xml"}]},{"type":"text","value":" method of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Loader"}]},{"type":"text","value":" class:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"@staticmethod\ndef read_xml(xml_file: Path) -> list[ET.Element]:\n    \"\"\"\n    Read an XML file and return the root element.\n\n    Args:\n        xml_file (Path): Path to the XML file\n\n    Returns:\n        list[ET.Element]: List of records (ET.Element)\n    \"\"\"\n    logger.info(f\"Processing {xml_file}...\")\n    with open(xml_file, \"r\") as file:\n        root = ET.parse(file).getroot()\n        Loader._log_metadata(root)\n        return root.findall(\"Record\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"@"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"staticmethod\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" read_xml"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"xml_file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": Path) -> list[ET.Element]:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Read an XML file and return the root element.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Args:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        xml_file (Path): Path to the XML file\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Returns:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        list[ET.Element]: List of records (ET.Element)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    logger.info("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Processing "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"xml_file"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"...\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    with"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" open"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(xml_file, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"r\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" file:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        root = ET.parse(file).getroot()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        Loader._log_metadata(root)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" root.findall("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Record\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This method is responsible for reading an XML file and returning a list of records as "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ET.Element"}]}]},{"type":"text","value":" objects. The method takes a single argument "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"xml_file"}]},{"type":"text","value":", which is the path to the Apple Health XML file (i.e. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"export.xml"}]},{"type":"text","value":"). The method begins by logging a message indicating the file being processed. It then opens the file (in read-mode - "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"r\""}]},{"type":"text","value":") and reads its contents. It then gets the root element of the XML tree, logs some metadata by calling the private method "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_log_metadata"}]},{"type":"text","value":" (i.e. locale, export data, and user metadata), and lastly, it returns a list of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ET.Element"}]},{"type":"text","value":" objects representing the records (i.e. elements with a tag name \"Record\") in the XML file."}]},{"type":"element","tag":"h4","props":{"id":"parser"},"children":[{"type":"text","value":"Parser"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Parser"}]},{"type":"text","value":" class is the bread and butter of the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":" package. It is designed to parse the Apple Health export XML file. It inherits from the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Loader"}]},{"type":"text","value":" class, meaning that the end-user will never have to directly interact with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Loader"}]},{"type":"text","value":" class as the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Parser"}]},{"type":"text","value":" class will already internally call the appropriate methods to extract the records from the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"export.zip"}]},{"type":"text","value":" file."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are a couple of important methods defined in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Parser"}]},{"type":"text","value":", the most relevant one being the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"get_flag_records"}]},{"type":"text","value":" method. In essence, this function requires a flag or list of flags - health metric(s) (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HKQuantityTypeIdentifierHeartRate"}]},{"type":"text","value":" represents heart rate records; "},{"type":"element","tag":"a","props":{"href":"https://alxdrcirilo.dev/apple-health-parser/usage/flags","rel":["nofollow"]},"children":[{"type":"text","value":"table of supported flags"}]},{"type":"text","value":"), and it will return a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" object (or dictionary with keys as flags and values as "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" objects). Furthermore, the function is decorated with a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@timeit"}]},{"type":"text","value":" decorator that will just print the execution time of the function to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"stdout"}]},{"type":"text","value":"."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"@timeit\ndef get_flag_records(\n    self, flag: str | list[str]\n) -> ParsedData | dict[str, ParsedData]:\n    \"\"\"\n    Get parsed data based on the given flag.\n\n    Args:\n        flag (str | list[str]): Flag to parse the records (e.g., `\"HKQuantityTypeIdentifierHeartRate\"`)\n\n    Returns:\n        ParsedData | dict[str, ParsedData]: Parsed data based on the flag(s)\n    \"\"\"\n\n    def _get_parsed_data(flag: str) -> ParsedData:\n        sources = self.get_sources(flag=flag)\n        models = self._build_models(flag=flag)\n        dates = self._get_dates(models=models)\n        records = pd.DataFrame([model.model_dump() for model in models])\n        return ParsedData(flag=flag, sources=sources, dates=dates, records=records)\n\n    if isinstance(flag, str):\n        return _get_parsed_data(flag=flag)\n\n    elif isinstance(flag, list):\n        return {f: _get_parsed_data(flag=f) for f in flag}\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"@timeit\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" get_flag_records"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"    self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | list["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") -> ParsedData | dict["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", ParsedData]:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Get parsed data based on the given flag.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Args:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        flag (str | list[str]): Flag to parse the records (e.g., `\"HKQuantityTypeIdentifierHeartRate\"`)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Returns:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        ParsedData | dict[str, ParsedData]: Parsed data based on the flag(s)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" _get_parsed_data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") -> ParsedData:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        sources = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".get_sources("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=flag)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        models = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"._build_models("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=flag)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        dates = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"._get_dates("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"models"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=models)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        records = pd.DataFrame([model.model_dump() "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" model "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" models])\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ParsedData("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=flag, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"sources"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=sources, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"dates"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=dates, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"records"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=records)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" isinstance"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(flag, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" _get_parsed_data("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=flag)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    elif"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" isinstance"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(flag, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"list"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" {f: _get_parsed_data("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=f) "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" f "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" flag}\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"\"What is the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" object?\""}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" object is a dataclass in Python designed to store parsed data from the Apple Health export file. It contains four fields: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"flag"}]},{"type":"text","value":" (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"HKQuantityTypeIdentifierHeartRate\""}]},{"type":"text","value":"), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sources"}]},{"type":"text","value":" (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"Alexandre's Apple Watch\""}]},{"type":"text","value":"), "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dates"}]},{"type":"text","value":" (set of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"datetime.date"}]},{"type":"text","value":"), and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"records"}]},{"type":"text","value":" (pandas DataFrame containing the actual records of the parsed data)."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"@dataclass\nclass ParsedData:\n    \"\"\"\n    Dataclass to store parsed data from the Apple Health export file.\n    \"\"\"\n\n    flag: str\n    sources: list[str]\n    dates: set[date]\n    records: pd.DataFrame\n\n    def __str__(self) -> str:\n        \"\"\"\n        String representation of the ParsedData class.\n        Includes the flag, sources, dates, and number of records.\n\n        Returns:\n            str: String representation of the ParsedData class\n        \"\"\"\n\n        description = [\n            f\"{'Flag:':<12}{self.flag}\",\n            f\"{'Sources:':<12}{len(self.sources)} sources\",\n            f\"{'Dates:':<12}{len(self.dates)} dates\",\n            f\"{'Records:':<12}{len(self.records)} records\",\n        ]\n\n        max_len = len(max(description, key=len))\n        description = [f\"{'ParsedData':=^{max_len}}\"] + description\n\n        return \"\\n\".join(description)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"@dataclass\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" ParsedData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    Dataclass to store parsed data from the Apple Health export file.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    flag: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    sources: list["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    dates: set[date]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    records: pd.DataFrame\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" __str__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") -> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        String representation of the ParsedData class.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        Includes the flag, sources, dates, and number of records.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        Returns:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"            str: String representation of the ParsedData class\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"        \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        description = [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"            f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'Flag:'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":":<12}{self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"            f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'Sources:'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":":<12}{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".sources)"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" sources\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"            f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'Dates:'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":":<12}{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".dates)"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" dates\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"            f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'Records:'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":":<12}{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".records)"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" records\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        max_len = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"max"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(description, "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        description = ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'ParsedData'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":":=^{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"max_len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"] + description\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":31},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":".join(description)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It also includes a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"__str__"}]},{"type":"text","value":" method to provide a string representation of the instance, detailing the flag, number of sources, dates, and records in a human-readable format."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üí° "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Tip"}]},{"type":"text","value":": Using "},{"type":"element","tag":"a","props":{"href":"https://peps.python.org/pep-0498","rel":["nofollow"]},"children":[{"type":"text","value":"f-string"}]},{"type":"text","value":" formatting (also called "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"literal string interpolation"}]},{"type":"text","value":"), we can pretty print our string! Here's a very useful "},{"type":"element","tag":"a","props":{"href":"https://fstring.help/cheat","rel":["nofollow"]},"children":[{"type":"text","value":"cheatsheet"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"When you print a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" object, you will see something similar to the following in your terminal:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"> print(parsed_data)\n=====================ParsedData=====================\nFlag:       HKQuantityTypeIdentifierRestingHeartRate\nSources:    3 sources\nDates:      144 dates\nRecords:    145 records\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"> print("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"parsed_data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"=====================ParsedData=====================\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Flag:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"       HKQuantityTypeIdentifierRestingHeartRate\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Sources:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"    3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" sources\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Dates:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"      144"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" dates\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Records:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"    145"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" records\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Coming back to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"get_flag_records"}]},{"type":"text","value":" method, now that we now what "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" represents, we see that it actually just performs a series of tasks by calling the appropriate methods to generate "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ParsedData"}]},{"type":"text","value":" object(s)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One line is particularly important:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"models = self._build_models(flag=flag)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"models = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"._build_models("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"flag"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=flag)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is essentially the data validation step. Under the hood, this private method is responsible for building "},{"type":"element","tag":"a","props":{"href":"https://docs.pydantic.dev","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Pydantic"}]}]},{"type":"text","value":" models, which leads us to the next subsection."}]},{"type":"element","tag":"h5","props":{"id":"data-validation-using-pydantic-models"},"children":[{"type":"text","value":"Data validation using Pydantic models"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An Apple Health record (in this case, heart rate record) looks something like this:"}]},{"type":"element","tag":"pre","props":{"className":"language-xml shiki shiki-themes dark-plus","code":"<Record type=\"HKQuantityTypeIdentifierHeartRate\" sourceName=\"Alexandre‚Äôs Apple Watch\" sourceVersion=\"10.2\" device=\"..., name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch6,7, software:10.2&gt;\" unit=\"count/min\" creationDate=\"2024-01-01 01:01:42 +0200\" startDate=\"2024-01-01 01:01:36 +0200\" endDate=\"2024-01-01 01:01:36 +0200\" value=\"74\">\n    <MetadataEntry key=\"HKMetadataKeyHeartRateMotionContext\" value=\"0\"/>\n</Record>\n","language":"xml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"Record"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" type"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"HKQuantityTypeIdentifierHeartRate\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" sourceName"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Alexandre‚Äôs Apple Watch\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" sourceVersion"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"10.2\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" device"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"..., name:Apple Watch, manufacturer:Apple Inc., model:Watch, hardware:Watch6,7, software:10.2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"&gt;"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" unit"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"count/min\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" creationDate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2024-01-01 01:01:42 +0200\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" startDate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2024-01-01 01:01:36 +0200\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" endDate"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2024-01-01 01:01:36 +0200\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" value"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"74\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"    <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"MetadataEntry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" key"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"HKMetadataKeyHeartRateMotionContext\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" value"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"0\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"/>\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"Record"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#808080"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":", models are defined in "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/blob/main/apple_health_parser/models/records.py","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"records.py"}]}]},{"type":"text","value":" and used to validate data from the records like the one shown above."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As an example, let's take a look at the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HeartRateData"}]},{"type":"text","value":" model which is derived from the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HealthData"}]},{"type":"text","value":" model."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"class MotionContext(StrEnum):\n    UNSET = \"0\"\n    SEDENTARY = \"1\"\n    ACTIVE = \"2\"\n\n\nclass HeartRateData(HealthData):\n    device: str = Field(title=\"Device\", description=\"Device used for measurement\")\n    motion_context: str = Field(\n        alias=\"motionContext\",\n        title=\"Motion Context\",\n        description=\"Context of motion (e.g. sedentary, active, unset)\",\n        examples=[\"Unset\", \"Sedentary\", \"Active\"],\n    )\n\n    @field_validator(\"motion_context\", mode=\"before\")\n    @classmethod\n    def check_motion_context(cls, v: str) -> str:\n        return MotionContext(v).name.lower().capitalize()\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" MotionContext"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"StrEnum"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    UNSET = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    SEDENTARY = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"1\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    ACTIVE = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" HeartRateData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"HealthData"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    device: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = Field("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"title"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Device\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"description"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Device used for measurement\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    motion_context: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = Field(\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        alias"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"motionContext\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        title"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Motion Context\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        description"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Context of motion (e.g. sedentary, active, unset)\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"        examples"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Unset\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Sedentary\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Active\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"],\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    )\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    @field_validator"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"motion_context\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"mode"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"before\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    @"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"classmethod\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" check_motion_context"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"cls"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"v"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") -> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" MotionContext(v).name.lower().capitalize()\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HeartRateData"}]},{"type":"text","value":" model defines all the fields defined in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"HealthData"}]},{"type":"text","value":" model and extends it by adding two additional fields: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"device"}]},{"type":"text","value":", and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"motion_context"}]},{"type":"text","value":". The former is self-explanatory, whilst the latter defines the type of motion context associated with the heart rate record - i.e. \"unknown\", \"sedentary\", or \"active\". To represent the motion context, we use a "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/enum.html#enum.StrEnum","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"StrEnum"}]}]},{"type":"text","value":". Notice that there is a method "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"check_motion_context"}]},{"type":"text","value":" decorated with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@field_validator"}]},{"type":"text","value":". The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"mode=\"before\""}]},{"type":"text","value":" argument specifies that this validation should be performed before the field is set. This method is responsible for setting the appropriate motion context into a human-readable format (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"Active\""}]},{"type":"text","value":") in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"motion_context"}]},{"type":"text","value":" field."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Using Pydantic models ensures that the records parsed from the XML file are correctly structured and valid according to the defined models. This adds a layer of robustness and maintainability to the data parsing logic. This way, if something with the data is unexpected or missing, we can catch it early at the source."}]},{"type":"element","tag":"h4","props":{"id":"plot"},"children":[{"type":"text","value":"Plot"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Plot"}]},{"type":"text","value":" class plays a central role in the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":" package. But before we can actually plot anything, we need the data to be preprocessed. For this, I picked "},{"type":"element","tag":"a","props":{"href":"https://pandas.pydata.org/","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pandas"}]}]},{"type":"text","value":", a widely adopted data analysis library that integrates very well with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"plotly"}]},{"type":"text","value":". The data preprocessing naturally comes after data validation using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pydantic"}]},{"type":"text","value":", i.e. after the models have been built and validated. Most data will be similar, with some variations for special cases (e.g. heart rate data has "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"motion context"}]},{"type":"text","value":" metadata, sleep data has "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"sleep phases"}]},{"type":"text","value":" metadata, etc.). Same goes for plotting, with most plots being similar in the way they are generated with slight variations (e.g. x-axis column name of the pandas DataFrame, title, legend, etc.). And this leads to a really cool concept in programming: "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"interfaces"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h5","props":{"id":"interfaces"},"children":[{"type":"text","value":"Interfaces"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In simple terms, an "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" defines a set of abstract methods that a class must implement. This ensures that any class that implements the interface will have a certain set of functionalities. It gives us the ability to define how a class should look without specifying the details of the implementation. Furthermore, it can also help us avoid unnecessary code duplication, promoting the use of "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"polymorphism"}]},{"type":"text","value":" - classes can be treated through the same interface despite having different internal implementations. If you think of it at a high level, an interface is like a blueprint that you can reuse all over your codebase."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"There are multiple ways to define an interface in Python, but for this project I decided to make use of "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/abc.html","rel":["nofollow"]},"children":[{"type":"text","value":"Abstract Base Classes"}]},{"type":"text","value":", also called "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"ABCs"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üîç "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note"}]},{"type":"text","value":": In Python, abstract methods are defined by decorating a method with "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/abc.html#abc.abstractmethod","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@abstractmethod"}]}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":", the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Plot"}]},{"type":"text","value":" class inherits from "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PlotInterface"}]},{"type":"text","value":". Here's part of what this interface looks like:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"from abc import ABC, abstractmethod\n\nclass PlotInterface(ABC):\n    @abstractmethod\n    def _get_figure(self, data):\n        # Implement case-specific method to get figure\n    \n    def plot(self):\n        figure = self._get_figure()\n        # Do something with figure\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" abc "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ABC, abstractmethod\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" PlotInterface"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(ABC):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    @abstractmethod\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" _get_figure"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"        # Implement case-specific method to get figure\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"    def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" plot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        figure = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"self"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"._get_figure()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"        # Do something with figure\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"@abstractmethod"}]},{"type":"text","value":" decorator to make the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_get_figure"}]},{"type":"text","value":" method abstract, i.e. any subclass of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PlotInterface"}]},{"type":"text","value":" needs to implement "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_get_figure"}]},{"type":"text","value":". You'll notice that there is also another method in this example - the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"plot"}]},{"type":"text","value":" method. This is a regular (or "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"concrete"}]},{"type":"text","value":") method - a method that provides a concrete implementation. This method is designed to call the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_get_figure"}]},{"type":"text","value":" method to obtain a figure and them perform a set of operations that are ubiquitous to any possible subclass of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PlotInterface"}]},{"type":"text","value":", i.e. showing and saving the plot. This way, we do not need to implement it in subclasses of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"PlotInterface"}]},{"type":"text","value":". On the other hand, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"_get_figure"}]},{"type":"text","value":" is case-specific, e.g. heatmaps have different requirements than standard plots (e.g. scatter plots) in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"plotly"}]},{"type":"text","value":" library."}]},{"type":"element","tag":"h3","props":{"id":"cicd"},"children":[{"type":"text","value":"CI/CD"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This project was the first time I went the extra mile to set up proper CI/CD"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-3","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-3"},"children":[{"type":"text","value":"3"}]}]},{"type":"text","value":". CI/CD done right can have a tremendous impact on a project, including: faster release cycles (thanks to automated testing, formatting, and linting) and bug detection, increased reliability (less human error), and immediate feedback, among others."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This project is hosted on GitHub and makes use of GitHub Actions - a CI/CD platform to automate build, test, and deployment pipelines defined in so-called "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"workflows"}]},{"type":"text","value":". For the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Apple Health Parser"}]},{"type":"text","value":" package, I've defined "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/apple-health-parser/tree/main/.github/workflows","rel":["nofollow"]},"children":[{"type":"text","value":"four workflows"}]},{"type":"text","value":":"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Commit lint and semantic versioning (using "},{"type":"element","tag":"a","props":{"href":"https://github.com/wagoid/commitlint-github-action","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"commitlint"}]}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://github.com/python-semantic-release/python-semantic-release","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"python-semantic-release"}]}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Unit test coverage (using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pytest"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pytest-cov"}]},{"type":"text","value":", with the coverage report uploaded to "},{"type":"element","tag":"a","props":{"href":"https://coveralls.io/github/alxdrcirilo/apple-health-parser?branch=main","rel":["nofollow"]},"children":[{"type":"text","value":"Coveralls"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Deploy documentation to GitHub Pages (using "},{"type":"element","tag":"a","props":{"href":"https://www.mkdocs.org/","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"mkdocs"}]}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Publish to "},{"type":"element","tag":"a","props":{"href":"https://pypi.org","rel":["nofollow"]},"children":[{"type":"text","value":"PyPI"}]},{"type":"text","value":" (using "},{"type":"element","tag":"a","props":{"href":"https://github.com/JRubics/poetry-publish","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry-publish"}]}]},{"type":"text","value":")"}]}]},{"type":"element","tag":"h2","props":{"id":"outro"},"children":[{"type":"text","value":"Outro"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If you're interested in reading more about interfaces, and abstract base classes in particular, I highly recommend the following reads:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/a/53213772","rel":["nofollow"]},"children":[{"type":"text","value":"\"Is it a good practice to put common methods to an abstract class in Python?\""}]},{"type":"text","value":" - Stack Overflow"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://realpython.com/python-interface","rel":["nofollow"]},"children":[{"type":"text","value":"Implementing an Interface in Python"}]},{"type":"text","value":" - RealPython"}]}]},{"type":"element","tag":"section","props":{"className":["footnotes"],"dataFootnotes":""},"children":[{"type":"element","tag":"h2","props":{"className":["sr-only"],"id":"footnote-label"},"children":[{"type":"text","value":"Footnotes"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{"id":"user-content-fn-1"},"children":[{"type":"text","value":"From the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"export.zip"}]},{"type":"text","value":" file you can generate from the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Health"}]},{"type":"text","value":" app on your iPhone "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-1","ariaLabel":"Back to reference 1","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-2"},"children":[{"type":"text","value":"Comma-separated values "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-2","ariaLabel":"Back to reference 2","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-3"},"children":[{"type":"text","value":"Continuous Integration/Continuous Deployment "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-3","ariaLabel":"Back to reference 3","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"Table of Contents","searchDepth":3,"depth":5,"links":[{"id":"preface","depth":2,"text":"Preface","children":[{"id":"sneak-peek","depth":3,"text":"Sneak peek"},{"id":"motivation","depth":3,"text":"Motivation"}]},{"id":"building-the-apple-health-parser","depth":2,"text":"Building the Apple Health Parser","children":[{"id":"purpose","depth":3,"text":"Purpose"},{"id":"implementation","depth":3,"text":"Implementation","children":[{"id":"loader","depth":4,"text":"Loader"},{"id":"parser","depth":4,"text":"Parser","children":[{"id":"data-validation-using-pydantic-models","depth":5,"text":"Data validation using Pydantic models"}]},{"id":"plot","depth":4,"text":"Plot","children":[{"id":"interfaces","depth":5,"text":"Interfaces"}]}]},{"id":"cicd","depth":3,"text":"CI/CD"}]},{"id":"outro","depth":2,"text":"Outro"},{"id":"footnote-label","depth":2,"text":"Footnotes"}]}},"_type":"markdown","_id":"content:blog:2024:5.apple_health_parser.md","_source":"content","_file":"blog/2024/5.apple_health_parser.md","_stem":"blog/2024/5.apple_health_parser","_extension":"md"},{"_path":"/blog/2024/ramachandraw","_dir":"2024","_draft":false,"_partial":false,"_locale":"","title":"Ramachandran plotting tool","description":"Releasing the stable production version of the ramachandraw Python package","date":"2024-03-24","readtime":"7","tags":{"language":["python"],"field":["bioinformatics"],"type":["package","tool"]},"repo":"https://github.com/alxdrcirilo/ramachandraw","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"preface"},"children":[{"type":"text","value":"Preface"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In late 2019, right before the start of the "},{"type":"element","tag":"a","props":{"href":"https://nl.wikipedia.org/wiki/COVID-19","rel":["nofollow"]},"children":[{"type":"text","value":"COVID-19"}]},{"type":"text","value":" pandemic, I vaguely recall coming upon the idea of creating a Python package - for practice but also for fun. At that time, I was following a Master in Computer Science with a specialization in Bioinformatics at the University of Leiden (the Netherlands)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As is the case in many other fields, there is a plethora of tools written in Python available to the greater public through individual or communal efforts. In Bioinformatics, a very good example of a large Python package with broad usability is "},{"type":"element","tag":"a","props":{"href":"https://biopython.org","rel":["nofollow"]},"children":[{"type":"text","value":"Biopython"}]},{"type":"text","value":". In other words, we don't want to reinvent the wheel. Since this would be my first Python package, I would have to start small and be realistic about my expectations and goals. I spent some time devising what gap I could fill, or in which domain I could build something that would be truly useful and improve the productivity of the scientific community (or the greater public at large). I realized that there was no package available on PyPi"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-1","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-1"},"children":[{"type":"text","value":"1"}]}]},{"type":"text","value":" that could draw a "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Ramachandran_plot","rel":["nofollow"]},"children":[{"type":"text","value":"Ramachandran plot"}]},{"type":"text","value":" in a straightforward fashion, yet still allowing a highly-customizable setup, and providing relevant information (e.g. dictionary of œÜ and œà torsion angles)."}]},{"type":"element","tag":"h3","props":{"id":"ramachandran-plot"},"children":[{"type":"text","value":"Ramachandran plot"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Proteins are made up of aminoacid residues linked together in what we call a \"polypeptide chain\". There are two main torsion (dihedral) angles in this chain: "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Phi"}]},{"type":"text","value":" (œÜ) and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Psi"}]},{"type":"text","value":" (œà), defining the rotations of the polypeptide backbone around the bonds between N-CŒ±, and CŒ±-C, respectively"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-2","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-2"},"children":[{"type":"text","value":"2"}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"div","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"figure","props":{"className":["figure"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"img","props":{"alt":"Torsion angles","src":"/images/2024/3.ramachandraw/torsion.svg","className":["figure-image","svg"],"style":"max-height: 300px; width: auto;"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"p","props":{"className":["figure-caption"]},"children":[{"type":"text","value":"Phi (œÜ) and Psi (œà) torsion angles. Source: "},{"type":"element","tag":"a","props":{"style":"font-size: inherit;","href":"https://en.wikipedia.org/wiki/Ramachandran_plot#/media/File:Protein_backbone_PhiPsiOmega_drawing.svg"},"children":[{"type":"text","value":"Wikipedia"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Developed by G. N. Ramachandran et al. in 1963, the Ramachandran plot serves as a way to visualize energetically allowed (or favoured) regions for torsion angles œÜ against œà. It can be used in two main ways:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Assessment of protein structure quality"}]},{"type":"text","value":": assess the accuracy/plausibility of protein structures by analyzing backbone torsion angles against allowed regions"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Secondary structure identification"}]},{"type":"text","value":": identify secondary structure elements like Œ±-helices and Œ≤-sheets by their characteristic patterns in the plot"}]}]},{"type":"element","tag":"h2","props":{"id":"building-a-python-package"},"children":[{"type":"text","value":"Building a Python package"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The first version of "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/ramachandraw","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw"}]}]},{"type":"text","value":" was released on PyPi a little over 4 years ago (December 2019). At that time, I used "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setup.py"}]},{"type":"text","value":" in combination with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"setuptools"}]},{"type":"text","value":" for the packaging and distribution of the project. I vaguely recall the whole process being rather clunky and unintuitive, but perhaps that was mostly due to my lack of experience."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Nowadays, we have a more modern approach to packaging in Python thanks to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pyproject.toml"}]},{"type":"text","value":" (defined in "},{"type":"element","tag":"a","props":{"href":"https://peps.python.org/pep-0518/","rel":["nofollow"]},"children":[{"type":"text","value":"PEP 518"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://peps.python.org/pep-0621/","rel":["nofollow"]},"children":[{"type":"text","value":"PEP 621"}]},{"type":"text","value":"). If present in a Python project, this file will be placed at the root of the directory structure. In a nutshell, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pyproject.toml"}]},{"type":"text","value":" defines the project metadata and dependencies in a declarative manner. The concerns (e.g. tooling and project author(s)) are clearly separated, dependency management is also improved, and it integrates well with different tooling widely adopted by the community (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"https://python-poetry.org/docs/pyproject/","rel":["nofollow"]},"children":[{"type":"text","value":"supports it"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pyproject.toml"}]},{"type":"text","value":" defined in "},{"type":"element","tag":"a","props":{"href":"https://pypi.org/project/ramachandraw/1.0.1/","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw-1.0.1"}]}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-toml shiki shiki-themes dark-plus","code":"[tool.poetry]\nname = \"ramachandraw\"\nversion = \"1.0.1\"\ndescription = \"Ramachandran plotting tool\"\nauthors = [\"Alexandre Cirilo\"]\nlicense = \"MIT\"\nreadme = \"README.md\"\n\n[tool.poetry.dependencies]\npython = \"^3.9\"\nmatplotlib = \"^3.8.3\"\nbiopython = \"^1.83\"\n\n[tool.poetry.group.dev.dependencies]\nmypy = \"^1.8.0\"\npyclean = \"^2.7.6\"\npytest = \"^8.0.1\"\npytest-coverage = \"^0.0\"\nruff = \"^0.2.2\"\nscipy = \"^1.12.0\"\n\n[build-system]\nbuild-backend = \"poetry.core.masonry.api\"\nrequires = [\"poetry-core\"]\n\n[tool.ruff.lint]\nselect = [\"I\", \"F401\"]\nignore-init-module-imports = true\n","language":"toml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"[tool.poetry]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"ramachandraw\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"version"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"1.0.1\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"description"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Ramachandran plotting tool\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"authors"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Alexandre Cirilo\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"license"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"MIT\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"readme"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"README.md\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"[tool.poetry.dependencies]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"python"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^3.9\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"matplotlib"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^3.8.3\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"biopython"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^1.83\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"[tool.poetry.group.dev.dependencies]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"mypy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^1.8.0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"pyclean"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^2.7.6\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"pytest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^8.0.1\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"pytest-coverage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^0.0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"ruff"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^0.2.2\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"scipy"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"^1.12.0\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"[build-system]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"build-backend"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"poetry.core.masonry.api\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"requires"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"poetry-core\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"[tool.ruff.lint]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"select"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"I\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"F401\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"ignore-init-module-imports"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"true\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since I used "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry"}]},{"type":"text","value":", some of the TOML sections are named differently (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[tool.poetry]"}]},{"type":"text","value":" instead of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[project]"}]},{"type":"text","value":")."}]}]},{"type":"element","tag":"h3","props":{"id":"using-poetry"},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"poetry"}]}]},{"type":"element","tag":"h4","props":{"id":"declaring-dependencies"},"children":[{"type":"text","value":"Declaring dependencies"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One of the nicest features of using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry"}]},{"type":"text","value":" in combination with the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pyproject.toml"}]},{"type":"text","value":" file is that you can have so-called "},{"type":"element","tag":"a","props":{"href":"https://python-poetry.org/docs/managing-dependencies/#dependency-groups","rel":["nofollow"]},"children":[{"type":"text","value":"dependency groups"}]},{"type":"text","value":". With dependency groups, you can categorize dependencies within a Python project based on their purpose. For example, with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw"}]},{"type":"text","value":", there are a couple of tools that we only need in our virtual environment when developing - these will be defined in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[tool.poetry.group.dev.dependencies]"}]},{"type":"text","value":". The dependencies that are required for the Python project (part of the implicit "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main"}]},{"type":"text","value":" group) are defined in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[tool.poetry.dependencies]"}]},{"type":"text","value":". Say you want to add the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ipython"}]},{"type":"text","value":" package when working on improving the project, you can simply run the following in your terminal:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"poetry add ipython --group dev\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" ipython"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" --group"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" dev\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üí° "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Reminder"}]},{"type":"text","value":": the virtual environment needs to be activated."}]}]},{"type":"element","tag":"h4","props":{"id":"building-the-project"},"children":[{"type":"text","value":"Building the project"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once the project is ready to be built, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry"}]},{"type":"text","value":" helps us once again with a very convenient one-liner:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"poetry build\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" build\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Running this command in the terminal will build the source and generate a "},{"type":"element","tag":"a","props":{"href":"https://peps.python.org/pep-0427/","rel":["nofollow"]},"children":[{"type":"text","value":"wheel"}]},{"type":"text","value":" file in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"dist"}]},{"type":"text","value":" directory (unless explicitly declared using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--output (-o)"}]},{"type":"text","value":")."}]},{"type":"element","tag":"h4","props":{"id":"publishing-the-project-to-pypi"},"children":[{"type":"text","value":"Publishing the project to PyPi"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Before publishing the Python package to PyPi, you should test it out using the rightly called "},{"type":"element","tag":"a","props":{"href":"https://test.pypi.org","rel":["nofollow"]},"children":[{"type":"text","value":"Test PyPi"}]},{"type":"text","value":". First, configure "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry"}]},{"type":"text","value":" to use the store token that can be generated using your (Test) PyPi account:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"# Test PyPi\npoetry config pypi-token.test-pypi pypi-YYYYYYYY\n\n# Production PyPi\npoetry config pypi-token.pypi pypi-XXXXXXXX\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# Test PyPi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pypi-token.test-pypi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pypi-YYYYYYYY\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# Production PyPi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" config"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pypi-token.pypi"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pypi-XXXXXXXX\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then, simply publish to PyPi (after testing on Test PyPi):"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"# Test PyPi\npoetry publish -r test-pypi\n\n# Production PyPi\npoetry publish\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# Test PyPi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" publish"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" -r"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" test-pypi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A9955"},"children":[{"type":"text","value":"# Production PyPi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" publish\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"unit-testing"},"children":[{"type":"text","value":"Unit testing"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"One very important aspect of software development that I omitted in the first versions ("},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0.x.x"}]},{"type":"text","value":") of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw"}]},{"type":"text","value":" is unit testing. Unit testing allows the testing of parts (i.e. units) of the code. With proper testing implemented, we can catch potential bugs early on, ensure that the changes we introduce comply with how we envisioned the software to work, and improve code maintainability."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For this project, I use the popular "},{"type":"element","tag":"a","props":{"href":"https://pytest.org","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pytest"}]}]},{"type":"text","value":" testing framework. The tests are run automatically on every "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"push"}]},{"type":"text","value":" to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" branch using "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"GitHub actions"}]},{"type":"text","value":". The coverage report (including the proportion of the codebase that is covered by tests) is uploaded to "},{"type":"element","tag":"a","props":{"href":"https://coveralls.io/github/alxdrcirilo/ramachandraw?branch=master","rel":["nofollow"]},"children":[{"type":"text","value":"Coveralls"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's what running "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pytest"}]},{"type":"text","value":" and explicitly requesting the coverage statistics looks like:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"‚ùØ pytest --cov=ramachandraw\n======================== test session starts ========================\nplatform darwin -- Python 3.10.13, pytest-8.0.2, pluggy-1.4.0\nrootdir: /Users/alxdrcirilo/Documents/personal/ramachandraw\nplugins: cov-4.1.0\ncollected 11 items                                                  \n\ntests/test_fetch.py ......                                    [ 54%]\ntests/test_get_phi_psi.py ...                                 [ 81%]\ntests/test_plot.py ..                                         [100%]\n\n--------- coverage: platform darwin, python 3.10.13-final-0 ----------\nName                         Stmts   Miss  Cover\n------------------------------------------------\nramachandraw/__init__.py         0      0   100%\nramachandraw/exceptions.py       2      2     0%\nramachandraw/parser.py          32      0   100%\nramachandraw/utils.py           75      1    99%\n------------------------------------------------\nTOTAL                          109      3    97%\n\n\n======================== 11 passed in 4.60s =========================\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"‚ùØ"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pytest"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" --cov=ramachandraw\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"========================"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" test"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" session"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" starts"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" ========================\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"platform"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" darwin"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" --"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" Python"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 3.10.13,"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pytest-8.0.2,"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" pluggy-1.4.0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"rootdir:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" /Users/alxdrcirilo/Documents/personal/ramachandraw\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"plugins:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" cov-4.1.0\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"collected"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 11"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" items"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"                                                  \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"tests/test_fetch.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" ......"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"                                    [ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"54%]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"tests/test_get_phi_psi.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" ..."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"                                 [ "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"81%]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"tests/test_plot.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" .."}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"                                         [100%]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"---------"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" coverage:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" platform"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" darwin,"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" python"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 3.10.13-final-0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":" ----------\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"                         Stmts"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"   Miss"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"  Cover\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"------------------------------------------------\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ramachandraw/__init__.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"         0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"      0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"   100%\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ramachandraw/exceptions.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"       2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"      2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"     0%\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ramachandraw/parser.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"          32"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"      0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"   100%\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"ramachandraw/utils.py"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"           75"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"      1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    99%\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"------------------------------------------------\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"TOTAL"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"                          109"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"      3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    97%\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"========================"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 11"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" passed"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 4.60s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" =========================\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"using-ramachandraw"},"children":[{"type":"text","value":"Using "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ramachandraw"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw-1.0.0"}]},{"type":"text","value":", the package is only supported in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Python 3.9-3.12"}]},{"type":"text","value":". To install the package from PyPi using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"pip"}]},{"type":"text","value":", simply run:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"pip install ramachandraw\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"pip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" ramachandraw\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Or, if using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"poetry"}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"poetry add ramachandraw\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"poetry"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" ramachandraw\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The documentation can be found in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"README.md"}]},{"type":"text","value":" file on the "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/ramachandraw","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub repository"}]},{"type":"text","value":". All functions include docstrings which most modern IDEs"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-3","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-3"},"children":[{"type":"text","value":"3"}]}]},{"type":"text","value":" support - these will help you remain efficient when developing and using "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw"}]},{"type":"text","value":" without the need of checking the official documentation."}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here's a simple example of fetching human deoxyhaemoglobin - "},{"type":"element","tag":"a","props":{"href":"https://www.wwpdb.org/pdb?id=pdb_00004hhb","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"4hhb"}]}]},{"type":"text","value":", from the "},{"type":"element","tag":"a","props":{"href":"https://www.wwpdb.org","rel":["nofollow"]},"children":[{"type":"text","value":"wwPDB"}]},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-4","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-4"},"children":[{"type":"text","value":"4"}]}]},{"type":"text","value":":"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"from ramachandraw.utils import fetch_pdb\n\nhemoglobin = fetch_pdb(pdb_id='4hhb')\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ramachandraw.utils "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" fetch_pdb\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"hemoglobin = fetch_pdb("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"pdb_id"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"'4hhb'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To extract the œÜ and œà torsion angles, use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"get_phi_psi"}]},{"type":"text","value":" function:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"from ramachandraw.parser import get_phi_psi\n\nphi_psi(pdb_filepath=hemoglobin)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ramachandraw.parser "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" get_phi_psi\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"phi_psi("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"pdb_filepath"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=hemoglobin)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Lastly, to draw the Ramachandran plot, run the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"plot"}]},{"type":"text","value":" function:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"from ramachandraw.utils import plot\n\nplot(pdb_filepath=hemoglobin)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" ramachandraw.utils "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" plot\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"plot("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"pdb_filepath"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"=hemoglobin)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ramachandraw"}]},{"type":"text","value":" Python pacakge supports plotting single PDB files or batches of multiple PDB files. Simply provide a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"list"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"tuple"}]},{"type":"text","value":" of PDB ids instead of a single "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"str"}]},{"type":"text","value":"."}]},{"type":"element","tag":"div","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"figure","props":{"className":["figure"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"img","props":{"alt":"Single PDB","src":"/images/2024/3.ramachandraw/single.png","className":["figure-image"],"style":"border: 1px solid lightgray; border-radius: 4px; margin: 0 6px; max-width: 50%; object-fit: contain;"},"children":[]},{"type":"text","value":"\n    "},{"type":"element","tag":"img","props":{"alt":"Batch of PDBs","src":"/images/2024/3.ramachandraw/batch.png","className":["figure-image"],"style":"border: 1px solid lightgray; border-radius: 4px; margin: 0 6px; max-width: 50%; object-fit: contain;"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"p","props":{"className":["figure-caption"]},"children":[{"type":"text","value":"\n  Ramachandran plot for one PDB and for a batch of PDBs, from left to right."}]}]},{"type":"element","tag":"section","props":{"className":["footnotes"],"dataFootnotes":""},"children":[{"type":"element","tag":"h2","props":{"className":["sr-only"],"id":"footnote-label"},"children":[{"type":"text","value":"Footnotes"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{"id":"user-content-fn-1"},"children":[{"type":"element","tag":"a","props":{"href":"https://pypi.org","rel":["nofollow"]},"children":[{"type":"text","value":"Python Package Index"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-1","ariaLabel":"Back to reference 1","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-2"},"children":[{"type":"element","tag":"a","props":{"href":"https://proteinstructures.com/structure/ramachandran-plot/","rel":["nofollow"]},"children":[{"type":"text","value":"Torsion Angles and the Ramachandran Plot"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-2","ariaLabel":"Back to reference 2","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-3"},"children":[{"type":"text","value":"Integrated Development Environment "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-3","ariaLabel":"Back to reference 3","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-4"},"children":[{"type":"text","value":"Worldwide Protein Data Bank "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-4","ariaLabel":"Back to reference 4","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"‚Ü©"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"Table of Contents","searchDepth":3,"depth":5,"links":[{"id":"preface","depth":2,"text":"Preface","children":[{"id":"ramachandran-plot","depth":3,"text":"Ramachandran plot"}]},{"id":"building-a-python-package","depth":2,"text":"Building a Python package","children":[{"id":"using-poetry","depth":3,"text":"Using poetry","children":[{"id":"declaring-dependencies","depth":4,"text":"Declaring dependencies"},{"id":"building-the-project","depth":4,"text":"Building the project"},{"id":"publishing-the-project-to-pypi","depth":4,"text":"Publishing the project to PyPi"}]},{"id":"unit-testing","depth":3,"text":"Unit testing"}]},{"id":"using-ramachandraw","depth":2,"text":"Using ramachandraw","children":[{"id":"example","depth":3,"text":"Example"}]},{"id":"footnote-label","depth":2,"text":"Footnotes"}]}},"_type":"markdown","_id":"content:blog:2024:3.ramachandraw.md","_source":"content","_file":"blog/2024/3.ramachandraw.md","_stem":"blog/2024/3.ramachandraw","_extension":"md"},{"_path":"/blog/2024/aoc_2023","_dir":"2024","_draft":false,"_partial":false,"_locale":"","title":"Advent of Code 2023 üéÑ","description":"Experiencing the Advent of Code challenges for the first time","date":"2024-01-01","readtime":"10","tags":{"language":["python"],"field":["problem-solving"],"type":["fun","challenge"]},"repo":"https://github.com/alxdrcirilo/advent-of-code","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"history"},"children":[{"type":"text","value":"History"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://adventofcode.com","rel":["nofollow"]},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Advent of Code"}]}]},{"type":"text","value":" is an annual programming challenge event created by "},{"type":"element","tag":"a","props":{"href":"http://was.tl","rel":["nofollow"]},"children":[{"type":"text","value":"Eric Walst"}]},{"type":"text","value":" and based on the "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Advent_calendar","rel":["nofollow"]},"children":[{"type":"text","value":"advent calendar"}]},{"type":"text","value":". It consists of a series of programming challenges of varying complexity. These tasks may be completed in any programming language. Participants can also compete on the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"global leaderboard"}]},{"type":"text","value":" which is solely based on speed (i.e. how fast you reach the solution). The first iteration of the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Advent of Code"}]},{"type":"text","value":" started on December 1st 2015. Over the past few years, it has been gaining popularity."}]},{"type":"element","tag":"h2","props":{"id":"_2023-edition"},"children":[{"type":"text","value":"2023 Edition"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This year, I decided to give "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Advent of Code"}]},{"type":"text","value":" a try. Unfortunately, I got sick and lost track of it for a few days. I wasn't participating competitively anyway, so nothing stops me from finishing the whole set of problems at some point in the near future. I thoroughly enjoyed solving the challenges and look forward to next year's edition. In this first post, you will find two of my favourite problems from this year as well the thought process and implementation: "},{"type":"element","tag":"a","props":{"href":"#day-4"},"children":[{"type":"text","value":"Day 4"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"#day-9"},"children":[{"type":"text","value":"Day 9"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üîç "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note"}]},{"type":"text","value":": complexity seems to be significantly higher in part 2."}]}]},{"type":"element","tag":"h3","props":{"id":"day-4"},"children":[{"type":"text","value":"Day 4"}]},{"type":"element","tag":"h4","props":{"id":"part-1"},"children":[{"type":"text","value":"Part 1"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"a","props":{"href":"https://adventofcode.com/2023/day/4","rel":["nofollow"]},"children":[{"type":"text","value":"Day 4"}]},{"type":"text","value":" "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Part 1"}]},{"type":"text","value":" we are faced with a regular "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Intersection_(set_theory)","rel":["nofollow"]},"children":[{"type":"text","value":"set intersection"}]},{"type":"text","value":" problem. In essence, the input data is comprised of an identifier - "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Card #"}]},{"type":"text","value":", owned numbers (i.e. first set of numbers, before the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" delimiter), winning numbers (i.e. second set of numbers, after the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" delimiter). Starting with 1 point for the first match (i.e. owned number is present in winning numbers), we then double the amount of points for every subsequent match. The solution is the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"sum of all the points"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example of the input:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"Card 1: 41 48 83 86 17 | 83 86  6 31 17  9 48 53\nCard 2: 13 32 20 16 61 | 61 30 68 82 17 32 24 19\nCard 3:  1 21 53 59 44 | 69 82 63 72 16 21 14  1\nCard 4: 41 92 73 84 69 | 59 84 76 51 58  5 54 83\nCard 5: 87 83 26 28 32 | 88 30 70 12 93 22 82 36\nCard 6: 31 18 13 56 72 | 74 77 10 23 35 67 36 11\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Card"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 1:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 41"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 48"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 83"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 86"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 17"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"83"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 86"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 31"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 17"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  9"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 48"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 53\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Card"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 2:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 13"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 32"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 20"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 16"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 61"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"61"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 30"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 68"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 82"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 17"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 32"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 24"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 19\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Card"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 3:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 21"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 53"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 59"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 44"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"69"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 82"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 63"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 72"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 16"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 21"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 14"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Card"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 4:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 41"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 92"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 73"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 84"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 69"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"59"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 84"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 76"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 51"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 58"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 54"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 83\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Card"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 5:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 87"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 83"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 26"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 28"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 32"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"88"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 30"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 70"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 12"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 93"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 22"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 82"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 36\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"Card"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":" 6:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 31"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 18"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 13"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 56"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 72"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" | "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"74"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 77"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 23"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 35"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 67"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 36"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":" 11\n"}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"solution"},"children":[{"type":"text","value":"Solution"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To parse the relevant data, I decided to make use of "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Regular_expression","rel":["nofollow"]},"children":[{"type":"text","value":"regex"}]},{"type":"text","value":" matching. The main idea is to parse the owned and winning numbers into sets of digits (per scratchcard). In Python, we can then find the intersection between the 2 sets with a trivial "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/tutorial/datastructures.html#sets","rel":["nofollow"]},"children":[{"type":"text","value":"set intersection operator"}]},{"type":"text","value":" - "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"&"}]},{"type":"text","value":"."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Regex matching"}]},{"type":"text","value":": We first match the regex pattern to the scratchcard. I decided to capture 3 groups: the card identifier (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Card 1"}]},{"type":"text","value":"), the owned numbers, and the winning numbers as seen below:"}]}]},{"type":"element","tag":"div","props":{"style":"display: block; text-align: center;"},"children":[{"type":"text","value":"\n  Card: \\s+"},{"type":"element","tag":"code","props":{"className":["snippet"]},"children":[{"type":"text","value":"(\\d+)"}]},{"type":"text","value":":(?:\\s+)"},{"type":"element","tag":"code","props":{"className":["snippet"]},"children":[{"type":"text","value":"((?:\\d+\\s*)+)"}]},{"type":"text","value":"\\s\\|(?:\\s+)"},{"type":"element","tag":"code","props":{"className":["snippet"]},"children":[{"type":"text","value":"((?:\\d+\\s*)+)"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In Python, we can define "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/re.html","rel":["nofollow"]},"children":[{"type":"text","value":"raw string notation for regular expressions"}]},{"type":"text","value":" by prefixing a string variable with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"r"}]},{"type":"text","value":", as in:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"pattern = r\"Card\\s+(\\d+):(?:\\s+)((?:\\d+\\s*)+)\\s\\|(?:\\s+)((?:\\d+\\s*)+)\"\nresult = re.match(pattern, scratchcard)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"pattern = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\"Card\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"(?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")((?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"\\|"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"(?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")((?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"result = re.match(pattern, scratchcard)\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üí° "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Tip"}]},{"type":"text","value":": we only need to capture relevant groups by encapsulating the groups we want to capture in parentheses. Non-capturing groups are prefixed with \""},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"?:"}]},{"type":"text","value":"\"."}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Extract digits"}]},{"type":"text","value":": The next step involves converting the string "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"\"41 48 83 86 17\""}]},{"type":"text","value":" into a list of integers "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[41, 48, 83, 86, 17]"}]},{"type":"text","value":". This can be easily accomplished using a combination of list comprehension and Python's "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/functions.html#map","rel":["nofollow"]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" built-in function."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Firstly, "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"[*map(int, x.split())]"}]},{"type":"text","value":" creates a list where we split a given group "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" into a list of strings that are casted into a list of integers. The resulting "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"map"}]},{"type":"text","value":" object is then destructured and wrapped in square brackets to create a list. This is then repeated for each captured group in the regex match using a list comprehension."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"_, own, win = [[*map(int, x.split())] for x in result.groups()]\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"_, own, win = [[*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", x.split())] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" result.groups()]\n"}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"üí° "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Tip"}]},{"type":"text","value":": the "},{"type":"element","tag":"a","props":{"href":"https://docs.python.org/3/library/re.html#re.Match.groups","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"groups()"}]}]},{"type":"text","value":" method returns a tuple containing all the subgroups of the match."}]}]},{"type":"element","tag":"ol","props":{"start":3},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Find intersection"}]},{"type":"text","value":": Now we only need to find the number of digits present in both sets (i.e. owned and winning) and subtract 1 to it (explained below)."}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"intersection = len(set(own) & set(win)) - 1\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"intersection = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(own) & "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(win)) - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1\n"}]}]}]}]},{"type":"element","tag":"ol","props":{"start":4},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Compute score"}]},{"type":"text","value":": To compute the number of points amassed for a given scratchcard, remember that we start with 1 point for the first match, and then double that score for every subsequent match. This can be calculated using "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"2"},{"type":"element","tag":"sup","props":{},"children":[{"type":"text","value":"(n-1)"}]}]},{"type":"text","value":", where "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" is the number of intersections."}]}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"score = int(2**intersection)\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"score = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"**intersection)\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Considering all of the above, we can effortlessly piece together the code and end up with a working solution:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"import re\n\n\ndef get_points(scratchcard: str) -> int:\n    \"\"\"Return the total number of points of a scratchcard.\n    \n    :param str scratchcard: scratchcard\n    :return int: total number of points\n    \"\"\"\n    result = re.match(pattern, scratchcard)\n    _, own, win = [[*map(int, x.split())] for x in result.groups()]\n    intersection = len(set(own) & set(win)) - 1\n    return int(2**intersection)\n\n\nif __name__ == \"__main__\":\n    with open(\"2023/day_04/input.txt\", \"r\") as file:\n        data = file.read().splitlines()\n\n    pattern = r\"Card\\s+(\\d+):(?:\\s+)((?:\\d+\\s*)+)\\s\\|(?:\\s+)((?:\\d+\\s*)+)\"\n    points = sum(map(lambda x: get_points(x), data))\n    print(f\"Total number of points: {points}\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" re\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" get_points"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"scratchcard"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"str"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") -> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"Return the total number of points of a scratchcard.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    :param str scratchcard: scratchcard\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    :return int: total number of points\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    result = re.match(pattern, scratchcard)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    _, own, win = [[*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", x.split())] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" x "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" result.groups()]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    intersection = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"len"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(own) & "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"set"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(win)) - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":" int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"**intersection)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" __name__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" == "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"__main__\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    with"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" open"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2023/day_04/input.txt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"r\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" file:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        data = file.read().splitlines()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    pattern = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"r"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\"Card\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"(?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")((?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"\\|"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"(?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")((?:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D7BA7D"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D16969"},"children":[{"type":"text","value":"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    points = "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"lambda"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": get_points(x), data))\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Total number of points: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"points"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"part-2"},"children":[{"type":"text","value":"Part 2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Part 2"}]},{"type":"text","value":", the challenge gets a little bit more complicated. Instead of counting points, we are now tasked with counting the total number of scratchards we end up with. That is, we now win "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"n"}]},{"type":"text","value":" copies of the scratchcards that follow a given scratchcard. For example, say we have "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Card 10"}]},{"type":"text","value":" with 3 matching numbers, we would then win one copy of cards "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"11"}]},{"type":"text","value":", "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"12"}]},{"type":"text","value":", and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"13"}]},{"type":"text","value":". Say now that "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Card 11"}]},{"type":"text","value":" has 2 matching numbers, we would then end up with additional copies of cards "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"12"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"13"}]},{"type":"text","value":"."}]},{"type":"element","tag":"div","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"figure","props":{"className":["figure"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"img","props":{"alt":"Day 4 - Part 2","src":"/images/2024/1.aoc_2023/day4-2.svg","className":["figure-image","svg"],"style":"max-width: 200px;"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n  "},{"type":"element","tag":"p","props":{"className":["figure-caption"]},"children":[{"type":"text","value":"Example for "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Day 4 - Part 2"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Summing up the copies of the cards we gained, we would end up with:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"{10: 1, 11: 1, 12: 2, 13: 3}\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"11"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"12"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"13"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"solution-1"},"children":[{"type":"text","value":"Solution"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This problem can easily be solved using the magic of ‚ú®"},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Recursion_(computer_science)","rel":["nofollow"]},"children":[{"type":"text","value":"recursion"}]},{"type":"text","value":"‚ú®. The idea is to parse each scratchcard and then:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"As in "},{"type":"element","tag":"a","props":{"href":"#part-1"},"children":[{"type":"text","value":"Day 4 - Part 1"}]}]},{"type":"text","value":": We make use of regular expressions to capture the relevant groups, extract the digits, and find the intersection between the sets of numbers (i.e. owned and winning numbers)."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"‚ö†Ô∏è "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Gotcha"}]},{"type":"text","value":": we don't subtract 1 to the length of the intersection in "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Part 2"}]},{"type":"text","value":" since we want the exact length of the range of cards."}]}]},{"type":"element","tag":"ol","props":{"start":2},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Count the cards"}]},{"type":"text","value":": To count the cards, we use the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"get_scratchcards()"}]},{"type":"text","value":" recursive function. In a nutshell, this function will iterate over the cards recusively and count the copies using a counter (i.e. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cards"}]},{"type":"text","value":" variable)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As the code for this part is a bit more verbose, you can find the full solution for this part on "},{"type":"element","tag":"a","props":{"href":"https://github.com/alxdrcirilo/advent-of-code/blob/main/2023/day_04/day4-2.py","rel":["nofollow"]},"children":[{"type":"text","value":"GitHub"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"day-9"},"children":[{"type":"text","value":"Day 9"}]},{"type":"element","tag":"h4","props":{"id":"part-1-1"},"children":[{"type":"text","value":"Part 1"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://adventofcode.com/2023/day/9","rel":["nofollow"]},"children":[{"type":"text","value":"Day 9"}]},{"type":"text","value":" was a really fun one to solve. This task is a canonical example of a pattern recognition and sequence extrapolation problem. In a nutshell, we are tasked with finding the differences between consecutive numbers in each sequence (so you always end up with "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"n - 1"}]},{"type":"text","value":" numbers for each subsequence) until we reach a sequence solely containing zeroes. Using the differences we computed, we can then extrapolate the next value in a given sequence. The solution is the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"sum of all the extrapolated values"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As explained in the "},{"type":"element","tag":"a","props":{"href":"https://adventofcode.com/2023/day/9","rel":["nofollow"]},"children":[{"type":"text","value":"exercise"}]},{"type":"text","value":", imagine with start with the following sequence of numbers:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"1   3   6  10  15  21\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  15"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  21\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If we compute the differences between each consecutive pair of numbers, the subsequent sequence equates:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"1   3   6  10  15  21\n  2   3   4   5   6\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  15"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  21\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"  2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This process repeats itself until we reach a resulting sequence that only contains zeroes:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"1   3   6  10  15  21\n  2   3   4   5   6\n    1   1   1   1\n      0   0   0\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  15"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  21\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"  2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"      0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To compute the extrapolated values, we first add a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" to the last sequence (i.e. the sequence containing only zeroes). Then, for each sequence from the bottom up, we compute the extrapolated value by summing the last number in the sequence with the previous extrapolated value."}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"1   3   6  10  15  21  '28'\n  2   3   4   5   6   '7'\n    1   1   1   1   '1'\n      0   0   0   '0'\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  15"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  21"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"  '28'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"  2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"   '7'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"   '1'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"      0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"   '0'\n"}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"solution-2"},"children":[{"type":"text","value":"Solution"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As in "},{"type":"element","tag":"a","props":{"href":"#part-2"},"children":[{"type":"text","value":"Day 4 - Part 2"}]},{"type":"text","value":", this problem seems to be a prime example in which "},{"type":"element","tag":"a","props":{"href":"https://en.wikipedia.org/wiki/Recursion_(computer_science)","rel":["nofollow"]},"children":[{"type":"text","value":"recursion"}]},{"type":"text","value":" can shine. Given a list of numbers - "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"values"}]},{"type":"text","value":", we can compute the differences between each pair of consecutive digits with:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"diff = [b - a for a, b in zip(values, values[1:])]\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"diff = [b - a "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" a, b "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" zip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(values, values["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":])]\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To implement the recursive function, we simply need to define the recursive and base cases. The base case in this problem is reached when all the digits in a sequence are zeroes, the recursive case is reached elsewise."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At first, I made the na√Øve mistake of just checking if the sum of digits is 0. But this will not give the proper solution since we can still end up with negative numbers that cancel out their positive counterparts (e.g. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-2 0 0 2 0"}]},{"type":"text","value":") and have the sum of digits equating "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":". So instead of checking "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"while sum(diff)"}]},{"type":"text","value":" for the recursive case, we should check if any of the integers in the sequence is different than zero, i.e. "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"while any(diff)"}]},{"type":"text","value":". Then, we just need to sum the last integer in the previous sequence to the last integer in the computed sequence of pairwise differences (in the example shown above, this would be: "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"21+6+1=28"}]},{"type":"text","value":")."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Having this in mind, it takes little effort to wrap up the concepts and come up with our recursive function:"}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"def get_diff_sum(values: list[int]) -> int:\n    \"\"\"Return the sum of the extrapolated values.\n\n    :return int: sum of extrapolated values\n    \"\"\"\n    diff = [b - a for a, b in zip(values, values[1:])]\n    while any(diff):\n        return values[-1] + get_diff_sum(diff)\n    return values[-1]\n\n\nif __name__ == \"__main__\":\n    with open(\"2023/day_09/input.txt\", \"r\") as file:\n        data = file.read().splitlines()\n\n    data = [[*map(int, line.split())] for line in data]\n    print(f\"Sum of the extrapolated values: {sum(map(get_diff_sum, data))}\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" get_diff_sum"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"values"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": list["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]) -> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"Return the sum of the extrapolated values.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    :return int: sum of extrapolated values\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    diff = [b - a "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" a, b "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" zip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(values, values["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":])]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    while"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" any"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(diff):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" values[-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"] + get_diff_sum(diff)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" values[-"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" __name__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" == "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"__main__\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    with"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" open"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2023/day_09/input.txt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"r\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" file:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        data = file.read().splitlines()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    data = [[*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", line.split())] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" line "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" data]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Sum of the extrapolated values: "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(get_diff_sum, data))"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"part-2-1"},"children":[{"type":"text","value":"Part 2"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the second part of "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Day 9"}]},{"type":"text","value":", we are tasked with extrapolating the values "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"backwards"}]},{"type":"text","value":". Instead of adding a zero to the end of the final sequence (i.e. the sequence of zeroes), we add it to the beginning. We then fill in the extrapolated values at the beginning of each parent sequence. As seen in the "},{"type":"element","tag":"a","props":{"href":"https://adventofcode.com/2023/day/9","rel":["nofollow"]},"children":[{"type":"text","value":"exercise"}]},{"type":"text","value":", if we get the following sequence after computing the differences:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"10  13  16  21  30  45\n   3   3   5   9  15\n     0   2   4   6\n       2   2   2\n         0   0\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  13"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  16"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  21"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  30"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  45\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   9"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  15\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"     0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"       2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"         0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Extrapolating the values at the beginning gives us:"}]},{"type":"element","tag":"pre","props":{"className":"language-shell shiki shiki-themes dark-plus","code":"'5'  10  13  16  21  30  45\n  '5'   3   3   5   9  15\n   '-2'   0   2   4   6\n      '2'   2   2   2\n        '0'   0   0\n","language":"shell","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"'5'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  10"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  13"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  16"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  21"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  30"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  45\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"  '5'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   3"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   5"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   9"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"  15\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"   '-2'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   4"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   6\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"      '2'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"        '0'"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"   0\n"}]}]}]}]},{"type":"element","tag":"h5","props":{"id":"solution-3"},"children":[{"type":"text","value":"Solution"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As it turns out, the solution to this problem is straightforward: instead of calculating the sum of the last digits to compute the next extrapolated value, we calculate the difference of the first digits."}]},{"type":"element","tag":"pre","props":{"className":"language-python shiki shiki-themes dark-plus","code":"def get_diff_sum(values: list[int]) -> int:\n    \"\"\"Return the sum of the extrapolated values (backwards).\n\n    :return int: sum of extrapolated values\n    \"\"\"\n    diff = [b - a for a, b in zip(values, values[1:])]\n    while any(diff):\n        return values[0] - get_diff_sum(diff)\n    return values[0]\n\n\nif __name__ == \"__main__\":\n    with open(\"2023/day_09/input.txt\", \"r\") as file:\n        data = file.read().splitlines()\n\n    data = [[*map(int, line.split())] for line in data]\n    print(f\"Sum of the extrapolated values (backwards): {sum(map(get_diff_sum, data))}\")\n","language":"python","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"def"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" get_diff_sum"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":"values"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":": list["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]) -> "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"Return the sum of the extrapolated values (backwards).\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    :return int: sum of extrapolated values\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"    \"\"\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    diff = [b - a "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" a, b "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" zip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(values, values["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":])]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    while"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" any"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(diff):\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"        return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" values["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"] - get_diff_sum(diff)\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    return"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" values["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#B5CEA8"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#9CDCFE"},"children":[{"type":"text","value":" __name__"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" == "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"__main__\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"    with"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":" open"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"2023/day_09/input.txt\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"r\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" file:\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"        data = file.read().splitlines()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"    data = [[*"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#4EC9B0"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":", line.split())] "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" line "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C586C0"},"children":[{"type":"text","value":"in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":" data]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"    print"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"f"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\"Sum of the extrapolated values (backwards): "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"sum"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#DCDCAA"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":"(get_diff_sum, data))"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#569CD6"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#CE9178"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D4D4D4"},"children":[{"type":"text","value":")\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"Table of Contents","searchDepth":3,"depth":5,"links":[{"id":"history","depth":2,"text":"History"},{"id":"_2023-edition","depth":2,"text":"2023 Edition","children":[{"id":"day-4","depth":3,"text":"Day 4","children":[{"id":"part-1","depth":4,"text":"Part 1","children":[{"id":"solution","depth":5,"text":"Solution"}]},{"id":"part-2","depth":4,"text":"Part 2","children":[{"id":"solution-1","depth":5,"text":"Solution"}]}]},{"id":"day-9","depth":3,"text":"Day 9","children":[{"id":"part-1-1","depth":4,"text":"Part 1","children":[{"id":"solution-2","depth":5,"text":"Solution"}]},{"id":"part-2-1","depth":4,"text":"Part 2","children":[{"id":"solution-3","depth":5,"text":"Solution"}]}]}]}]}},"_type":"markdown","_id":"content:blog:2024:1.aoc_2023.md","_source":"content","_file":"blog/2024/1.aoc_2023.md","_stem":"blog/2024/1.aoc_2023","_extension":"md"}]